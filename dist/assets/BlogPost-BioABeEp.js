const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CxWLza9M.js","assets/index-DL6zFtt3.js","assets/index-D_b3VVYn.js","assets/index-DWSUlEXr.css","assets/blank-line-D7Eaw-Hx.js","assets/index-nQtJcVaD.js","assets/index-UaeLLCXM.js","assets/index-D-W3UkTk.js"])))=>i.map(i=>d[i]);
import{c as P,u as R,r as l,_ as u,j as e,L as x,a as w}from"./index-D_b3VVYn.js";import{S as m,G as N}from"./GlassCard--LQrUtex.js";import{P as i,C as D}from"./posts-YzQC-zME.js";import{C as $}from"./clock-B-1Vd8op.js";import{A as k}from"./arrow-right-DPpvPT00.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],T=P("arrow-left",C),L=r=>{const t=new Date(r),n=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."];return`${t.getDate()} ${n[t.getMonth()]} ${t.getFullYear()+543}`},M=r=>{const t=r.replace(/```[\s\S]*?```/g," ").replace(/<[^>]+>/g," ").trim().split(/\s+/).filter(Boolean).length;return`${Math.max(1,Math.round(t/250))} นาที`},A=r=>{let t=r;if(/<html|<head|<meta|<!DOCTYPE/i.test(t)){const d=t.match(/<body[^>]*>([\s\S]*?)<\/body>/i);t=d?d[1]:t,t=t.replace(/<head[\s\S]*?<\/head>/gi,"").replace(/<meta[^>]*>/gi,"").replace(/<link[^>]*>/gi,"").replace(/<script[\s\S]*?<\/script>/gi,"")}const n=/^```[\w-]*\n([\s\S]*?)\n```\s*$/,o=t.trim().match(n);return o&&(t=o[1]),t};class B extends w.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,msg:String(t?.message||t)}}componentDidCatch(t,n){console.error("BlogPost crashed:",t,n)}render(){return this.state.hasError?e.jsxs("div",{className:"text-sm text-red-300",children:["เกิดข้อผิดพลาดในการแสดงบทความ — ",this.state.msg]}):this.props.children}}function H(){const{slug:r}=R(),t=l.useMemo(()=>i.find(a=>a.slug===r&&a.published!==!1),[r]),[n,o]=l.useState("กำลังโหลด…"),[d,y]=l.useState(""),[p,v]=l.useState(""),[f,b]=l.useState(null),[g,_]=l.useState(null),[j,E]=l.useState(null);if(l.useEffect(()=>{if(!t)return;const a=t.source?.startsWith("/")?t.source:`/${t.source}`;fetch(a,{cache:"no-cache"}).then(s=>{if(!s.ok)throw new Error(`โหลดไฟล์ไม่สำเร็จ (${s.status})`);return s.text()}).then(s=>{const c=A(s);o(c),v(M(c)),document.title=`${t.title} – Blog`}).catch(s=>{y(s.message||"ไม่พบไฟล์บทความ"),o(`# ไม่พบไฟล์บทความ

แหล่งที่มา: ${a}`)})},[t]),l.useEffect(()=>{let a=!0;return(async()=>{try{const s=await u(()=>import("./index-CxWLza9M.js"),__vite__mapDeps([0,1,2,3,4,5]));a&&b(s.default||s)}catch{}try{const s=await u(()=>import("./index-UaeLLCXM.js"),__vite__mapDeps([6,4,1]));a&&_(s.default||s)}catch{}try{const s=await u(()=>import("./index-D-W3UkTk.js"),__vite__mapDeps([7,5,1]));a&&E(s.default||s)}catch{}})(),()=>{a=!1}},[]),!t)return e.jsx(m,{className:"py-24",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 text-center",children:[e.jsx("div",{className:"text-2xl font-semibold",children:"ไม่พบบทความ"}),e.jsx("div",{className:"mt-2",children:e.jsx(x,{to:"/blog",className:"underline underline-offset-4",children:"กลับไปหน้าบล็อก"})})]})});const S=e.jsx("pre",{className:"whitespace-pre-wrap text-neutral-200",children:n}),h={children:n};return g&&(h.remarkPlugins=[g]),j&&(h.rehypePlugins=[j]),e.jsxs("div",{className:"relative",children:[e.jsx(m,{aurora:!0,angleBottom:!0,className:"pt-16 pb-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsxs("div",{className:"text-sm opacity-90",children:[e.jsx(x,{to:"/blog",className:"underline underline-offset-4",children:"บล็อก"})," / ",e.jsx("span",{className:"opacity-80",children:t.category})]}),e.jsx("h1",{className:"mt-2 text-3xl font-semibold md:text-5xl leading-tight",children:t.title}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-sm opacity-90",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(D,{className:"h-4 w-4"})," ",L(t.date)]}),p&&e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4"})," ",p]})]}),d&&e.jsxs("div",{className:"mt-2 text-xs text-red-300",children:["ข้อผิดพลาด: ",d]})]})}),t.cover&&e.jsx(m,{className:"pb-0 pt-0",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6",children:e.jsx(N,{className:"overflow-hidden",children:e.jsx("img",{src:t.cover,alt:t.title,className:"h-[360px] w-full object-cover"})})})}),e.jsx(m,{aurora:!0,angleTop:!0,className:"py-10",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6",children:e.jsx(N,{className:"p-6",children:e.jsx("article",{children:e.jsx(B,{children:f?w.createElement(f,h):S})})})})}),e.jsx(m,{className:"py-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 flex flex-wrap justify-between gap-3 text-sm",children:[(()=>{const a=i.findIndex(c=>c.slug===r),s=a>0?i[a-1]:null;return s?e.jsxs(x,{to:`/blog/${s.slug}`,className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-3 py-2",children:[e.jsx(T,{className:"h-4 w-4"})," ",s.title]}):e.jsx("span",{})})(),(()=>{const a=i.findIndex(c=>c.slug===r),s=a<i.length-1?i[a+1]:null;return s?e.jsxs(x,{to:`/blog/${s.slug}`,className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-3 py-2",children:[s.title," ",e.jsx(k,{className:"h-4 w-4"})]}):e.jsx("span",{})})()]})})]})}export{H as default};
