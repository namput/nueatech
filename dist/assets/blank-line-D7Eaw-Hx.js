const y={};function I(n,t){const i=y,u=typeof i.includeImageAlt=="boolean"?i.includeImageAlt:!0,e=typeof i.includeHtml=="boolean"?i.includeHtml:!0;return p(n,u,e)}function p(n,t,i){if(A(n)){if("value"in n)return n.type==="html"&&!i?"":n.value;if(t&&"alt"in n&&n.alt)return n.alt;if("children"in n)return f(n.children,t,i)}return Array.isArray(n)?f(n,t,i):""}function f(n,t,i){const u=[];let e=-1;for(;++e<n.length;)u[e]=p(n[e],t,i);return u.join("")}function A(n){return!!(n&&typeof n=="object")}function g(n,t,i,u){const e=n.length;let r=0,o;if(t<0?t=-t>e?0:e+t:t=t>e?e:t,i=i>0?i:0,u.length<1e4)o=Array.from(u),o.unshift(t,i),n.splice(...o);else for(i&&n.splice(t,i);r<u.length;)o=u.slice(r,r+1e4),o.unshift(t,0),n.splice(...o),r+=1e4,t+=1e4}function P(n,t){return n.length>0?(g(n,n.length,0,t),n):t}const h={}.hasOwnProperty;function z(n){const t={};let i=-1;for(;++i<n.length;)k(t,n[i]);return t}function k(n,t){let i;for(i in t){const e=(h.call(n,i)?n[i]:void 0)||(n[i]={}),r=t[i];let o;if(r)for(o in r){h.call(e,o)||(e[o]=[]);const l=r[o];w(e[o],Array.isArray(l)?l:l?[l]:[])}}}function w(n,t){let i=-1;const u=[];for(;++i<t.length;)(t[i].add==="after"?n:u).push(t[i]);g(n,0,0,u)}function E(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const L=c(/[A-Za-z]/),O=c(/[\dA-Za-z]/),j=c(/[#-'*+\--9=?A-Z^-~]/);function N(n){return n!==null&&(n<32||n===127)}const Z=c(/\d/),B=c(/[\dA-Fa-f]/),D=c(/[!-/:-@[-`{-~]/);function b(n){return n!==null&&n<-2}function x(n){return n!==null&&(n<0||n===32)}function s(n){return n===-2||n===-1||n===32}const d=c(new RegExp("\\p{P}|\\p{S}","u")),m=c(/\s/);function c(n){return t;function t(i){return i!==null&&i>-1&&n.test(String.fromCharCode(i))}}function S(n,t,i,u){const e=u?u-1:Number.POSITIVE_INFINITY;let r=0;return o;function o(a){return s(a)?(n.enter(i),l(a)):t(a)}function l(a){return s(a)&&r++<e?(n.consume(a),l):(n.exit(i),t(a))}}function F(n){if(n===null||x(n)||m(n))return 1;if(d(n))return 2}function H(n,t,i){const u=[];let e=-1;for(;++e<n.length;){const r=n[e].resolveAll;r&&!u.includes(r)&&(t=r(t,i),u.push(r))}return t}const T={partial:!0,tokenize:C};function C(n,t,i){return u;function u(r){return s(r)?S(n,e,"linePrefix")(r):e(r)}function e(r){return r===null||b(r)?t(r):i(r)}}export{O as a,L as b,F as c,N as d,j as e,S as f,s as g,D as h,B as i,Z as j,x as k,T as l,b as m,E as n,z as o,P as p,d as q,H as r,g as s,I as t,m as u};
